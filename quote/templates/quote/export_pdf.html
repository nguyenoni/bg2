{% load static %}
<!DOCTYPE html>
<html lang="vi">

<head>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

</head>

<body>
  <div class="container" style="max-width: 920px; text-align: right; margin-bottom: 2em; padding-top: 1em; padding-bottom: 1em;border-bottom: 1px solid #ccc;">
    <div class="row">
      <span class="btn btn-success" onclick="ep_pdf()">Tải về pdf</span> <span></span> <span style="margin-left: 1em;" class="btn btn-danger" >Tải về Xcel</span>
    </div>
  </div>


  <div class="container" id="pdf"style="max-width: 920px;">
 
    <div class="row">
      <div class="col-md-3 text-center">
        <img src="https://thaihuonggroup.com.vn/wp-content/uploads/2021/11/logo_th-169x49.png" alt="Girl in a jacket"
          width="169" height="49">
        <p style="margin-top: 15px;"><strong>
            Công ty TNHH Đầu Tư và Thương Mại Thái Hương
          </strong>
        </p>
      </div>
      <div class="col-md-4"></div>
      <div class="col-md-5 text-center">

        <p>
          KCN Phú Nghĩa, Huyện Chương Mỹ, Hà Nội, Việt Nam
        </p>
        <span>
          Tel: 02432.989.989
        </span>
        <p>
          Web: https://thaihuong.com.vn Email: hotro.thaihuong@gmail.com
        </p>
      </div>


    </div>



    <div class="header" style="text-align: center;">
      <h1 style="margin-top: 2em;">
        Báo Giá Gia Công Sản Phẩm
      </h1>
    </div>
    <div style="margin: 15px 0 15px 0;">
      <div class="rs">
        <p class="text-right">{{ time }}</p>
      </div>
    </div>
    <table class="table">


      <tr>
        <th>STT</th>
        <th></th>
        <th>Tên</th>
        <th>Số lượng</th>
        <th>Đơn giá</th>
        <th>Thành tiền</th>
      </tr>
      <tr>
        <td>1</td>
        <td>Sản phẩm</td>
        <td>{{ product.name }}</td>
        <td></td>
        <td>{{ product.price }}</td>
        <td></td>
      </tr>
      <tr>
        <td>2</td>
        <td>Nguyên liệu</td>
        <td>{{ material.name }}</td>
        <td>1</td>
        <td>{{ material.price }}</td>
        <td>{{ material.price }}</td>
      </tr>
      <tr>
        <td>3</td>
        <td>Bao bì cấp 1</td>
        <td>{{ packaging_level1.name }}</td>
        <td>1</td>
        <td>{{ packaging_level1.price }}</td>
        <td>{{ packaging_level1.price }}</td>
      </tr>
      <tr>
        <td>4</td>
        <td>Bao bì cấp 2</td>
        <td>{{ packaging_level2.name }}</td>
        <td>1</td>
        <td>{{ packaging_level2.price }}</td>
        <td>{{ packaging_level2.price }}</td>
      </tr>
      <tr>
        <td>5</td>
        <td>Tem nhãn</td>
        <td>{{ stamp.name }}</td>
        <td>1</td>
        <td>{{ stamp.price }}</td>
        <td>{{ stamp.price }}</td>
      </tr>
      <tr>
        <td>6</td>
        <td>Nhân công đóng gói</td>
        <td>{{ packing_worker.name }}</td>
        <td>1</td>
        <td>{{ packing_worker.price }}</td>
        <td>{{ packing_worker.price }}</td>
      </tr>
      <tr>
        <td>7</td>
        <td>Chi phí giấy công bố, kiểm nghiệm</td>
        <td>{{ announced.name }}</td>
        <td>1</td>
        <td>{{ announced.price }}</td>
        <td>{{ announced.price }}</td>
      </tr>
      <tr>
        <td>8</td>
        <td>Vận chuyển</td>
        <td>{{ feeship.name }}</td>
        <td>1</td>
        <td>{{ feeship.price }}</td>
        <td>{{ feeship.price }}</td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td><strong>Tổng</strong></td>
        <td>1000</td>
      </tr>
    </table>
    <div class="row" style="border-top:1px solid;text-align: center;">
      <p><i>thaihuonggroup.com.vn</i></p>
    </div>
  </div>
  <script src="{% static '/quote/plugins/jquery/jquery-3.1.0.min.js' %}"></script>
  <script src="{% static '/quote/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</body>

<script>
  function ep_pdf() {
    let el = document.getElementById("pdf")
    let f_name = `bao-gia-${new Date().toLocaleDateString()}.pdf`
    var opt = {
      margin: 1,
      filename: f_name,
      image: { type: 'jpeg', quality: 0.98 },
      pagebreak: { mode: 'avoid-all'},
      html2canvas: { scale: 2, useCROS: true },
      jsPDF: { unit: 'cm', format: 'a4', orientation: 'portrait' }
    };


    // New Promise-based usage:
    html2pdf().set(opt).from(el).save();
    // console.log(res.data);
  }
</script>

</html>